!function(e,t){if("function"==typeof define&&define.amd)define(["exports","module"],t);else if("undefined"!=typeof exports&&"undefined"!=typeof module)t(exports,module);else{var n={exports:{}};t(n.exports,n),e.Impetus=n.exports}}(this,function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=.3,i=.04,u=.11,r=function d(e){function t(){M.call(L,Z,$)}function r(e){R.call(L,W)}function s(e){if("touchmove"===e.type||"touchstart"===e.type||"touchend"===e.type){var t=e.targetTouches[0]||e.changedTouches[0];return{x:t.clientX,y:t.clientY,id:t.identifier}}return{x:e.clientX,y:e.clientY,id:null}}function c(e){W="start",R&&r();var t=s(e);te||ne||(te=!0,oe=!1,K=t.id,j=H=t.x,G=J=t.y,ie=[],l(j,G),document.addEventListener("touchmove",f),document.addEventListener("touchend",m),document.addEventListener("touchcancel",v),document.addEventListener("mousemove",f),document.addEventListener("mouseup",m))}function f(e){e.preventDefault(),D||e.stopImmediatePropagation();var t=s(e);W="update",R&&r(),te&&t.id===K&&(H=t.x,J=t.y,l(j,G),Q||ue.push({x:H,y:J}),!Q&&ue.length<=re?ue.length==re&&h():Y?Y==Q&&(e.stopImmediatePropagation(),x()):x())}function m(e){W="end",R&&r();var t=s(e);te&&t.id===K&&(v(),Q=null,ue=[])}function v(){te=!1,l(j,G),E(),document.removeEventListener("touchmove",f),document.removeEventListener("touchend",m),document.removeEventListener("touchcancel",v),document.removeEventListener("mouseup",m),document.removeEventListener("mousemove",f)}function l(e,t){for(var n=Date.now();ie.length>0&&!(n-ie[0].time<=100);)ie.shift();ie.push({x:e,y:t,time:n})}function h(){var e=ue[0],t=ue[ue.length-1],n=Math.abs(t.x-e.x),o=Math.abs(t.y-e.y);Q=n>o?"x":"y"}function p(){var e=H-j,n=J-G;if(Z+=e*I,$+=n*I,X){var o=w();0!==o.x&&(Z-=e*y(o.x)*I),0!==o.y&&($-=n*y(o.y)*I)}else w(!0);t(),j=H,G=J,ee=!1}function y(e){return 5e-6*Math.pow(e,2)+1e-4*e+.55}function x(){ee||a(p),ee=!0}function w(e){var t=0,n=0;return void 0!==U&&U>Z?t=U-Z:void 0!==V&&Z>V&&(t=V-Z),void 0!==z&&z>$?n=z-$:void 0!==C&&$>C&&(n=C-$),e&&(0!==t&&(Z=t>0?U:V),0!==n&&($=n>0?z:C)),{x:t,y:n,inBounds:0===t&&0===n}}function E(){var e=ie[0],t=ie[ie.length-1],n=t.x-e.x,o=t.y-e.y,i=t.time-e.time,u=i/15/I;N=n/u||0,O=o/u||0;var r=w();(Math.abs(N)>1||Math.abs(O)>1||!r.inBounds)&&(oe=!0,a(b))}function b(){if(oe){W="fading",R&&r(),N*=A,O*=A,Z+=N,$+=O;var e=w();if(Math.abs(N)>_||Math.abs(O)>_||!e.inBounds){if(X){var n=2.5;if(0!==e.x)if(e.x*N<=0)N+=e.x*i;else{var o=e.x>0?n:-n;N=(e.x+o)*u}if(0!==e.y)if(e.y*O<=0)O+=e.y*i;else{var o=e.y>0?n:-n;O=(e.y+o)*u}}else 0!==e.x&&(Z=e.x>0?U:V,N=0),0!==e.y&&($=e.y>0?z:C,O=0);t(),a(b)}else W="faded",R&&r(),oe=!1}}var g=e.source,L=void 0===g?document:g,M=e.update,T=e.multiplier,I=void 0===T?1:T,q=e.friction,A=void 0===q?.92:q,P=e.initialValues,B=e.boundX,F=e.boundY,S=e.bounce,X=void 0===S?!0:S,Y=e.lockAxis,k=e.bubble,D=void 0===k?!0:k,R=e.changed;n(this,d);var U,V,z,C,j,G,H,J,K,N,O,Q,W,Z=0,$=0,_=o*I,ee=!1,te=!1,ne=!1,oe=!1,ie=[],ue=[],re=3;!function(){if(L="string"==typeof L?document.querySelector(L):L,!L)throw new Error("IMPETUS: source not found.");if(!M)throw new Error("IMPETUS: update function not defined.");P&&(P[0]&&(Z=P[0]),P[1]&&($=P[1]),t()),B&&(U=B[0],V=B[1]),F&&(z=F[0],C=F[1]),L.addEventListener("touchstart",c),L.addEventListener("mousedown",c)}(),this.pause=function(){te=!1,ne=!0},this.resume=function(){ne=!1},this.setValues=function(e,t){"number"==typeof e&&(Z=e),"number"==typeof t&&($=t)},this.setMultiplier=function(e){I=e,_=o*I}};t.exports=r;var a=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)}}()});