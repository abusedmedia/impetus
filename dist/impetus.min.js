!function(e,t){if("function"==typeof define&&define.amd)define(["exports","module"],t);else if("undefined"!=typeof exports&&"undefined"!=typeof module)t(exports,module);else{var n={exports:{}};t(n.exports,n),e.Impetus=n.exports}}(this,function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=.3,i=.04,u=.11,r=function a(e){function t(){M.call(L,K,N)}function r(e){if("touchmove"===e.type||"touchstart"===e.type||"touchend"===e.type){var t=e.targetTouches[0]||e.changedTouches[0];return{x:t.clientX,y:t.clientY,id:t.identifier}}return{x:e.clientX,y:e.clientY,id:null}}function c(e){var t=r(e);W||Z||(W=!0,$=!1,j=t.id,U=z=t.x,V=C=t.y,_=[],m(U,V),document.addEventListener("touchmove",d),document.addEventListener("touchend",f),document.addEventListener("touchcancel",v),document.addEventListener("mousemove",d),document.addEventListener("mouseup",f))}function d(e){e.preventDefault();var t=r(e);W&&t.id===j&&(z=t.x,C=t.y,m(U,V),J||ee.push({x:z,y:C}),!J&&ee.length<=te?ee.length==te&&l():X?X==J&&(e.stopImmediatePropagation(),p()):p())}function f(e){var t=r(e);W&&t.id===j&&(v(),J=null,ee=[])}function v(){W=!1,m(U,V),w(),document.removeEventListener("touchmove",d),document.removeEventListener("touchend",f),document.removeEventListener("touchcancel",v),document.removeEventListener("mouseup",f),document.removeEventListener("mousemove",d)}function m(e,t){for(var n=Date.now();_.length>0&&!(n-_[0].time<=100);)_.shift();_.push({x:e,y:t,time:n})}function l(){var e=ee[0],t=ee[ee.length-1],n=Math.abs(t.x-e.x),o=Math.abs(t.y-e.y);J=n>o?"x":"y"}function h(){var e=z-U,n=C-V;if(K+=e*T,N+=n*T,S){var o=x();0!==o.x&&(K-=e*y(o.x)*T),0!==o.y&&(N-=n*y(o.y)*T)}else x(!0);t(),U=z,V=C,Q=!1}function y(e){return 5e-6*Math.pow(e,2)+1e-4*e+.55}function p(){Q||s(h),Q=!0}function x(e){var t=0,n=0;return void 0!==Y&&Y>K?t=Y-K:void 0!==k&&K>k&&(t=k-K),void 0!==D&&D>N?n=D-N:void 0!==R&&N>R&&(n=R-N),e&&(0!==t&&(K=t>0?Y:k),0!==n&&(N=n>0?D:R)),{x:t,y:n,inBounds:0===t&&0===n}}function w(){var e=_[0],t=_[_.length-1],n=t.x-e.x,o=t.y-e.y,i=t.time-e.time,u=i/15/T;G=n/u||0,H=o/u||0;var r=x();(Math.abs(G)>1||Math.abs(H)>1||!r.inBounds)&&($=!0,s(E))}function E(){if($){G*=A,H*=A,K+=G,N+=H;var e=x();if(Math.abs(G)>O||Math.abs(H)>O||!e.inBounds){if(S){var n=2.5;if(0!==e.x)if(e.x*G<=0)G+=e.x*i;else{var o=e.x>0?n:-n;G=(e.x+o)*u}if(0!==e.y)if(e.y*H<=0)H+=e.y*i;else{var o=e.y>0?n:-n;H=(e.y+o)*u}}else 0!==e.x&&(K=e.x>0?Y:k,G=0),0!==e.y&&(N=e.y>0?D:R,H=0);t(),s(E)}else $=!1}}var b=e.source,L=void 0===b?document:b,M=e.update,g=e.multiplier,T=void 0===g?1:g,q=e.friction,A=void 0===q?.92:q,I=e.initialValues,B=e.boundX,F=e.boundY,P=e.bounce,S=void 0===P?!0:P,X=e.lockAxis;n(this,a);var Y,k,D,R,U,V,z,C,j,G,H,J,K=0,N=0,O=o*T,Q=!1,W=!1,Z=!1,$=!1,_=[],ee=[],te=3;!function(){if(L="string"==typeof L?document.querySelector(L):L,!L)throw new Error("IMPETUS: source not found.");if(!M)throw new Error("IMPETUS: update function not defined.");I&&(I[0]&&(K=I[0]),I[1]&&(N=I[1]),t()),B&&(Y=B[0],k=B[1]),F&&(D=F[0],R=F[1]),L.addEventListener("touchstart",c),L.addEventListener("mousedown",c)}(),this.pause=function(){W=!1,Z=!0},this.resume=function(){Z=!1},this.setValues=function(e,t){"number"==typeof e&&(K=e),"number"==typeof t&&(N=t)},this.setMultiplier=function(e){T=e,O=o*T}};t.exports=r;var s=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)}}()});